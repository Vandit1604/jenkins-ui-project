<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Expose HTTP API with JSON content with Jenkins :: Jenkins</title>
    <link rel="canonical" href="https://docs.jenkins.com/dev-docs/handling-requests/json.html">
    <link rel="prev" href="responses.html">
    <link rel="next" href="deprecated-reflective-access.html">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<script type="module" src="https://unpkg.com/@jenkinsci/jenkins-io-components?module"></script>
<jio-navbar style="  position: fixed;
  top: 0;
  width: 100vw;
  z-index: 100;"></jio-navbar><div class="body">
<div class="nav-container" data-component="dev-docs" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Jenkins Developer Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Handling Requests</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="routing.html">Routing Requests</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="actions.html">Web Methods</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="responses.html">Responding to Requests</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="json.html">Expose HTTP API with JSON content with Jenkins</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="deprecated-reflective-access.html">Deprecated reflective access</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../crowdin/index.html">Jenkins Crowdin Integration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../crowdin/crowdin-integration.html">Setup a Crowdin Project</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../crowdin/translating-plugins.html">Translating plugins through Crowdin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../crowdin/proofread-content.html">How to proofread translation suggestions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../crowdin/troubleshooting.html">Troubleshooting crowdin issues</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../persistence/index.html">Persistent Objects</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../persistence/backward-compatibility.html">Backward Compatibility with XStream</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../persistence/custom-converter.html">Registering a Custom Converter</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../persistence/incompatible-releases.html">Marking Incompatible Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../architecture/index.html">Architecture</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../architecture/model.html">Model</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../architecture/web.html">Stapler Web Framework</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../architecture/extensions.html">Extensions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../architecture/remoting.html">Remoting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../internationalization/index.html">Internationalization and Localization</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../internationalization/i18n-source-code.html">Internationalizing Messages in Java Source Code</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../internationalization/i18n-jelly-views.html">Internationalizing Messages in Jelly Views</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../internationalization/i18n-groovy-views.html">Internationalizing Messages in Groovy Views</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../internationalization/advanced-localization.html">Advanced Localization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../internationalization/prepare-a-java-source-file.html">Prepare a Java Source File for Localization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../internationalization/prepare-a-jelly-view.html">Prepare a Jelly-based View for Localization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../internationalization/prepare-a-groovy-view.html">Preparing a Groovy-based View for Localization</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../internationalization/translate-a-help-file.html">Translate a help file</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../internationalization/translate-a-properties-file.html">Translate a properties file</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../development-enviorment/index.html">Development Environment</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../development-enviorment/ide-configuration.html">IDE Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../development-enviorment/taglibs.html">Taglibs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../extensibility/index.html">Extensibility</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../extensibility/action-for-all-projects.html">How to show a menu item on all projects</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../extensibility/serialization-of-anonymous-classes.html">How to serialize anonymous classes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../plugin-tutorial/index.html">Plugin Tutorial</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-tutorial/prepare.html">Preparing for Plugin Development</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-tutorial/create.html">Create a Plugin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-tutorial/run.html">Build and Run the Plugin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-tutorial/extend.html">Extend the Plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../plugin-development/index.html">Plugin Development</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-development/build-process.html">Plugin Build Process</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-development/choosing-jenkins-baseline.html">Choosing a Jenkins version to build against</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-development/dependency-management.html">Dependency Management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-development/dependencies-and-class-loading.html">Dependencies and Class Loading</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-development/optional-dependencies.html">Optional dependencies</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-development/plugin-release-tips.html">Plugin Release Tips</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-development/incrementals.html">Incrementals: Developing Components in Parallel</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-development/updating-parent.html">Updating Your Maven Parent POM</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-development/mark-a-plugin-incompatible.html">Mark a new plugin version as incompatible with older versions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-development/writing-an-scm-plugin.html">Writing an SCM Plugin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-development/pipeline-integration.html">Writing Pipeline-Compatible Plugins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../plugin-governance/index.html">Plugin Governance</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-governance/managing-permissions.html">Managing plugin permissions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-governance/adopt-a-plugin.html">Adopt a Plugin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugin-governance/deprecating-or-removing-plugin.html">Deprecating or removing a Plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../publishing/index.html">Publishing Plugins</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/style-guides.html">Style Guides</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/source-code-hosting.html">Source Code Hosting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/artifact-repository.html">Artifact Repository</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/documentation.html">Plugin Documentation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/wiki-page.html">Plugin Wiki Pages</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/plugin-site.html">Plugin Site</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/continuous-integration.html">Continuous Integration - buildPlugin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/usage-statistics.html">Usage Statistics</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/preparation.html">Before you start</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/new-plugin.html">Creating a new plugin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/requesting-hosting.html">Guide to Plugin Hosting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/releasing.html">Performing a Plugin Release</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/releasing-cd.html">Setting up automated plugin release</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/releasing-manually.html">Performing a Plugin Release manually</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/removing-from-distribution.html">Removing plugins from distribution</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../publishing/releasing-experimental-updates.html">Publishing Experimental Plugin Releases</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../building/index.html">Building and Debugging</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../building/intellij.html">IntelliJ Setup for Jenkins Core Development</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../tutorial-improve/index.html">Improve a Plugin Tutorial</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/add-a-jenkinsfile.html">Add a Jenkinsfile</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/update-parent-pom.html">Update parent POM</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/update-base-jenkins-version.html">Update Jenkins version</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/update-scm-url.html">Update SCM URL</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/add-more-spotbugs-checks.html">Add more spotbugs checks</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/automate-dependency-update-checks.html">Check dependencies</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/use-plugin-bill-of-materials.html">Use plugin bill of materials</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/enable-incrementals.html">Enable incrementals</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/migrate-documentation-to-github.html">Migrate documentation to GitHub</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/add-a-contributing-guide.html">Add a contributing guide</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/add-a-link-to-report-an-issue.html">Report an Issue</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/replace-jsr-305-annotations.html">Replace JSR-305</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/convert-translations.html">Convert translations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorial-improve/move-description-to-index.html">Move description</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../views/index.html">Views</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../views/read-only.html">Read only view</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../views/table-to-div-migration.html">Table to div layout migration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../views/exposing-bundled-resources.html">Exposing bundled resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../views/icon-path-to-icon-class-migration.html">Icon path to icon class migration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../views/symbols.html">Symbols</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../security/index.html">Security</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/secrets.html">Storing Secrets</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/form-validation.html">Securely implementing form validation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/xss-prevention.html">Preventing Cross-Site Scripting in Jelly views</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/rendering-user-content.html">Rendering User Content</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/remoting-callables.html">Remoting Callables</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/read-access.html">Restricting HTTP Access to &lt;code&gt;AccessControlled&lt;/code&gt; Objects</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/csp.html">Content-Security-Policy Compatibility</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../security/misc.html">Miscellaneous API Usage Recommendations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../cli/index.html">Jenkins CLI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../cli/writing-cli-commands.html">Writing CLI commands</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../initialization/index.html">Initialization and Startup ⚠️</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../initialization/embedded-container.html">Embedded Winstone and <code>executable-war</code></a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../template/index.html">index.adoc</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-text">xref:</span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">xref:</span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">xref:</span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">xref:</span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">xref:</span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">xref:</span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">xref:</span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">xref:</span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">xref:</span>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">xref:</span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../forms/index.html">Forms</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../forms/form-validation.html">Form validation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../forms/adding-tool-tips.html">Adding tool tips</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../forms/jelly-form-controls.html">Jelly form controls</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../forms/structured-form-submission.html">Structured form submission</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Jenkins Developer Documentation</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Jenkins Developer Documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../solutions/2.1/index.html">Jenkins Solutions Page</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../solutions/2.1/index.html">2.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../tutorial/2.1/index.html">Jenkins Tutorials</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../tutorial/2.1/index.html">2.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../user-docs/2.1/index.html">Jenkins User Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../user-docs/2.1/index.html">2.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../user-docs/2.1/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Jenkins Developer Documentation</a></li>
    <li><a href="index.html">Handling Requests</a></li>
    <li><a href="json.html">Expose HTTP API with JSON content with Jenkins</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/Vandit1604/jenkins-docs/edit/main/docs/dev-docs/modules/handling-requests/pages/json.adoc"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"/></svg>  Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Expose HTTP API with JSON content with Jenkins</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This page explains how to expose Json objects over HTTP API in your Jenkins plugins, using <code>GET</code> and <code>POST</code> verbs.
This page also shows how to test it with JenkinsRules from <a href="https://github.com/jenkinsci/jenkins-test-harness">jenkins-test-harness</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pre_requisite_a_pojo_plain_old_java_object"><a class="anchor" href="#_pre_requisite_a_pojo_plain_old_java_object"></a>Pre-requisite: a POJO (Plain Old Java Object)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This object represents the structured data that is exchanged between the HTTP server (Jenkins) and the client (curl for example).
We are using a very simple java Object for example purpose, but in production code you will have more complex objects to manipulate.</p>
</div>
<div class="paragraph">
<p>Note that if you use Stapler (<code>JSONObject</code>) for marshalling and unmarshalling JSON, you need an empty constructor.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static class MyJsonObject {
    private String message;

    //empty constructor required for JSON parsing.
    public MyJsonObject() {}

    public MyJsonObject(String message) {
        this.message = message;
    }

    public void setMessage(String message) {
        this.message = message;
    }

    public String getMessage() {
        return message;
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_handling_get_with_jenkins"><a class="anchor" href="#_handling_get_with_jenkins"></a>Handling GET with Jenkins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This part shows how to expose an HTTP GET that return a structured JSON response.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/* (1) */
import static java.util.Objects.requireNonNull;

import edu.umd.cs.findbugs.annotations.CheckForNull;
import hudson.Extension;
import hudson.model.RootAction;
import net.sf.json.JSONObject;
import org.kohsuke.stapler.HttpResponse;
import org.kohsuke.stapler.QueryParameter;
import org.kohsuke.stapler.WebMethod;
import org.kohsuke.stapler.json.JsonBody;
import org.kohsuke.stapler.json.JsonHttpResponse;
import org.kohsuke.stapler.verb.GET;
import org.kohsuke.stapler.verb.POST;

@Extension /* (2) */
public class JsonAPI implements RootAction /* (3) */ {

    @CheckForNull
    @Override
    public String getIconFileName() {
        return null; /* (4) */
    }

    @CheckForNull
    @Override
    public String getDisplayName() {
        return null; /* (5) */
    }

    @Override
    public String getUrlName() {
        return "custom-api"; /* (6) */
    }

    @GET
    @WebMethod(name = "get-example")/* (7) */
    public /* (8) */ JsonHttpResponse getExample() {
        JSONObject response = JSONObject.fromObject(new MyJsonObject("I am Jenkins"));
        return new JsonHttpResponse(response, 200); /* (9) */
    }

    @GET
    @WebMethod(name = "get-example-param")
    public JsonHttpResponse getWithParameters(
        @QueryParameter(required = true) String paramValue /* (10) */) {

        requireNonNull(paramValue);
        MyJsonObject myJsonObject = new MyJsonObject("I am Jenkins " + paramValue);
        JSONObject response = JSONObject.fromObject(myJsonObject);
        return new JsonHttpResponse(response, 200);
    }

    @GET
    @WebMethod(name = "get-error500")
    public JsonHttpResponse getError500() { /* (11) */
        MyJsonObject myJsonObject = new MyJsonObject("You got an error 500");
        JSONObject jsonResponse = JSONObject.fromObject(myJsonObject);
        JsonHttpResponse error500 = new JsonHttpResponse(jsonResponse, 500);
        throw error500;
    }
}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Non-exhaustive list of imports to use.</p>
</li>
<li>
<p>Must be an extension to be discovered as a service by Jenkins.</p>
</li>
<li>
<p>This class is an extension of RootAction.  It is a way to expose HTTP paths that is more frequently used to expose the Web UI, but it can also be used without HTML rendering.</p>
</li>
<li>
<p>Since there is no HTML/Jelly rendering, no icons are needed.</p>
</li>
<li>
<p>Since there is no HTML/Jelly rendering, no display name is needed.</p>
</li>
<li>
<p><code>getUrlName()</code> is the root of the JSON API.  Each WebMethod in the class is prefixed by this.</p>
</li>
<li>
<p><code>@GET</code> indicates the HTTP method that is expected, and <code>@WebMethod</code> indicates that it is accepting an HTTP request. By default, the JAVA name of the WebMethod is used, but a different name can be specified by using <code>name =</code></p>
</li>
<li>
<p><code>JsonHttpResponse</code> is a subclass of <code>HttpResponse</code> that indicates that the response content will be JSON</p>
</li>
<li>
<p>An HTTP status can be set in the response.</p>
</li>
<li>
<p><code>@QueryParameter</code> indicates that this parameter is injected from HTTP query parameter. By default, the JAVA parameter name is used (in this case <code>paramValue</code>), but a different name can be specified by using <code>value =</code> annotation attribute.</p>
</li>
<li>
<p>The method <code>getError500</code> is added in the example to show how to set an error response as JSON.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_testing_with_curl"><a class="anchor" href="#_testing_with_curl"></a>Testing with CURL</h3>
<div class="paragraph">
<p>A <code>mvn hpi:run</code> in the plugin should be enough to run it locally.  Assuming that Jenkins is up at <a href="http://localhost:8080/jenkins/" class="bare">http://localhost:8080/jenkins/</a> , you should have at this point:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -XGET \
    -w "\n STATUS:%{http_code}"  \
    http://localhost:8080/jenkins/custom-api/get-example-param?paramValue=hello

{"message":"I am Jenkins hello"}
 STATUS:200</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_of_test_with_jenkinsrule"><a class="anchor" href="#_example_of_test_with_jenkinsrule"></a>Example of test with JenkinsRule</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import static org.hamcrest.MatcherAssert.assertThat;

import jenkins.model.Jenkins;
import org.hamcrest.Matchers;
import org.junit.jupiter.api.Test;
import org.jvnet.hudson.test.JenkinsRule;
import org.jvnet.hudson.test.JenkinsRule.JSONWebResponse;
import org.jvnet.hudson.test.MockAuthorizationStrategy;
import org.jvnet.hudson.test.junit.jupiter.WithJenkins;

@WithJenkins
class JsonAPITest {

    private static final String GET_API_URL = "custom-api/get-example-param?paramValue=hello";

    @Test
    void testGetJSON(JenkinsRule j) throws Exception {
        JenkinsRule.WebClient webClient = j.createWebClient();

        JSONWebResponse response = webClient.getJSON(GET_API_URL);
        assertThat(response.getContentAsString(), Matchers.containsString("I am Jenkins hello"));
        assertThat(response.getStatusCode(), Matchers.equalTo(200));
    }

    @Test
    void testAdvancedGetJSON(JenkinsRule j) throws Exception {
        //Given a Jenkins setup with a user "admin"
        MockAuthorizationStrategy auth = new MockAuthorizationStrategy()
            .grant(Jenkins.ADMINISTER).everywhere().to("admin");

        j.jenkins.setSecurityRealm(j.createDummySecurityRealm());
        j.jenkins.setAuthorizationStrategy(auth);

        //We need to setup the WebClient, we use it to call the HTTP API
        JenkinsRule.WebClient webClient = j.createWebClient();

        //By default if the status code is not ok, WebClient throw an exception
        //Since we want to assert the error status code, we need to set to false.
        webClient.setThrowExceptionOnFailingStatusCode(false);

        // - simple call without authentication should be forbidden
        JSONWebResponse response = webClient.getJSON(GET_API_URL);
        assertThat(response.getStatusCode(), Matchers.equalTo(403));

        // - same call but authenticated using withBasicApiToken() should be fine
        response = webClient.withBasicApiToken("admin").getJSON(GET_API_URL);
        assertThat(response.getStatusCode(), Matchers.equalTo(200));
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_handling_post_with_jenkins"><a class="anchor" href="#_handling_post_with_jenkins"></a>Handling POST with Jenkins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section shows how to expose an HTTP endpoint that takes a structured JSON Object as input, and does a response with a JSON structured Object.
For this example the same Object is used as input and output, but you can also use different JSON structure for the response.</p>
</div>
<div class="paragraph">
<p>Starting from the class <code>JsonAPI</code> provided for GET example, add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@POST
@WebMethod(name = "create")
public JsonHttpResponse create(@JsonBody MyJsonObject body) {
    //Do any logic required for creation
    //For the example purpose we just uppercase the message parsed from the request.
    JSONObject response = new JSONObject();
    response.put("message", body.message.toUpperCase());
    return new JsonHttpResponse(response, 200);
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_testing_with_curl_2"><a class="anchor" href="#_testing_with_curl_2"></a>Testing with CURL</h3>
<div class="paragraph">
<p>A <code>mvn hpi:run</code> in the plugin should be enough to run it locally.
Assuming that Jenkins is up at <a href="http://localhost:8080/jenkins/" class="bare">http://localhost:8080/jenkins/</a> , you should have at this point:</p>
</div>
<div class="paragraph">
<p>Write a file <code>my.json</code> containing the JSON body:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"message":"A nice message to send"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, if you need a user and a token:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>go on Jenkins UI</p>
</li>
<li>
<p>login as a user, for example 'myuser'</p>
</li>
<li>
<p>on the top right click on user name</p>
</li>
<li>
<p>go on configure (for this user)</p>
</li>
<li>
<p>in the section "API Token" create a new token.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For additional documentation on the token, please visit:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../../../book/system-administration/authenticating-scripted-clients">Authenticating scripted clients</a></p>
</li>
<li>
<p><a href="../../../book/security/csrf-protection">CSRF Protection</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And then send the POST request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -XPOST \
    -H "Content-Type: application/json" \
    --user myuser:xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx \
    http://localhost:8080/jenkins/custom-api/create \
    --data "@my.json"

{"message":"A NICE MESSAGE TO SEND"}
 STATUS:200</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_of_test_with_jenkinsrule_2"><a class="anchor" href="#_example_of_test_with_jenkinsrule_2"></a>Example of test with JenkinsRule</h3>
<div class="paragraph">
<p>Starting from the class <code>JsonAPITest</code> provided for the GET example, add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Test
void testPostJSON(JenkinsRule j) throws Exception {

    //Given a Jenkins setup with a user "admin"
    MockAuthorizationStrategy auth = new MockAuthorizationStrategy()
        .grant(Jenkins.ADMINISTER).everywhere().to("admin");

    j.jenkins.setSecurityRealm(j.createDummySecurityRealm());
    j.jenkins.setAuthorizationStrategy(auth);

    //We need to setup the WebClient, we use it to call the HTTP API
    JenkinsRule.WebClient webClient = j.createWebClient();

    // Testing an authenticated POST that should answer 200 OK and return same json
    MyJsonObject objectToSend = new MyJsonObject("Jenkins is the way !");
    JenkinsRule.JSONWebResponse response = webClient
        .withBasicApiToken("admin")
        .postJSON("custom-api/create", JSONObject.fromObject(objectToSend));

    //because API is returning the same object, we assert the input message.
    assertThat(response.getContentAsString(), Matchers.containsString("JENKINS IS THE WAY !"));
    assertThat(response.getStatusCode(), Matchers.equalTo(200));
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_some_additional_information"><a class="anchor" href="#_some_additional_information"></a>Some additional information</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For people that are familiar with REST/JSON concept you may want to use other HTTP verbs. It should work, but since generally in Jenkins only <code>GET</code> and <code>POST</code> are used, this page only shows example for this 2 verbs.</p>
</div>
<div class="paragraph">
<p>You may also want to use several HTTP status code, following HTTP convention like <code>201</code> for created. It will also work, and the examples above are returning explicit <code>200</code> status to show how to manage the HTTP status that is return.
Some statuses are managed by Jenkins Core and may be returned automatically, like <code>403</code> when the user in the request does not have the required permission or is anonymous, or <code>404</code> when the HTTP API is not found.</p>
</div>
<div class="paragraph">
<p>If you are not familiar with Jenkins architecture, you can have a look to <a href="../../architecture/model">High level view of Jenkins application</a> and at <a href="../../architecture">Architecture</a></p>
</div>
<div class="paragraph">
<p>For more advanced reading on the HTTP layer of Jenkins, it&#8217;s managed by <a href="https://github.com/jenkinsci/stapler">Stapler</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/stapler/stapler/blob/master/docs/reference.adoc">Stapler URL Binding Reference</a></p>
</li>
<li>
<p><a href="../routing">How requests in Jenkins are routed</a></p>
</li>
<li>
<p><a href="../../testing">Testing Jenkins</a></p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="responses.html">Responding to Requests</a></span>
  <span class="next"><a href="deprecated-reflective-access.html">Deprecated reflective access</a></span>
</nav>
</article>
  </div>
</main>
</div>
<jio-footer></jio-footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
