<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Jenkins</title>
    <link rel="canonical" href="https://docs.jenkins.com/projects/2.2/gsoc/2020/project-ideas/git-plugin-performance.html">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../../_'</script>
  </head>
  <body class="article">
<script type="module" src="https://unpkg.com/@jenkinsci/jenkins-io-components?module"></script>
<jio-navbar style="  position: fixed;
  top: 0;
  width: 100vw;
  z-index: 100;"></jio-navbar>
  <div class="body">
<div class="nav-container" data-component="projects" data-version="2.2">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../index.html">Jenkins Projects</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../index.html">Jenkins Sub-projects</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../../user-docs/2.2/blueocean/getting-started.html">Getting started with Blue Ocean</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../blueocean/about.html">About Blue Ocean</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../blueocean/contribute.html">Contributing to Blue Ocean</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../jam/index.html">index.adoc</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../remoting/index.html">Jenkins Remoting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../index.html">index.adoc</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../2018/index.html">Jenkins in Google Summer of Code 2018</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2018/code-coverage-api-plugin.html">2018/code-coverage-api-plugin.adoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2018/eda-plugins.html">2018/eda-plugins.adoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2018/index.html">Jenkins in Google Summer of Code 2018</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2018/remoting-over-message-bus.html">2018/remoting-over-message-bus.adoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2018/simple-pull-request-job-plugin.html">2018/simple-pull-request-job-plugin.adoc</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../../../sigs/advocacy-and-outreach/outreach-programs/index.html">Outreach programs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../jcasc/index.html">index.adoc</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../jcasc/dev-tools.html">dev-tools.adoc</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../infrastructure/index.html">index.adoc</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../infrastructure/ircbot.html">ircbot.adoc</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../jenkins-operator/index.html">index.adoc</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Other Projects</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../../../sigs/docs/gsod/2020/projects/document-jenkins-on-kubernetes.html">Document Jenkins on Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://jenkins-x.io/">Jenkins X</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Jenkins Projects</span>
    <span class="version">2.2</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../../images/index.html">All of Jenkins Images</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../images/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../books/index.html">Jenkins Books</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../books/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../community/index.html">Jenkins Community</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../community/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../dev-docs/index.html">Jenkins Developer Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../dev-docs/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../events/index.html">Jenkins Events</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../events/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../Jenkins%20Project/2.2/index.html">Jenkins Project</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../Jenkins%20Project/2.2/index.html">2.2</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../index.html">Jenkins Projects</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../index.html">2.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../security/index.html">Jenkins Security Advisories</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../security/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../solutions/2.2/index.html">Jenkins Solutions Page</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../solutions/2.2/index.html">2.2</a>
        </li>
        <li class="version">
          <a href="../../../../../solutions/2.1/index.html">2.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../sigs/index.html">Jenkins Special Interest Groups</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../sigs/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../tutorial/2.2/index.html">Jenkins Tutorials</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../tutorial/2.2/index.html">2.2</a>
        </li>
        <li class="version">
          <a href="../../../../../tutorial/2.1/index.html">2.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../../user-docs/2.2/index.html">Jenkins User Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../user-docs/2.2/index.html">2.2</a>
        </li>
        <li class="version">
          <a href="../../../../../user-docs/2.1/index.html">2.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../user-docs/2.2/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/Vandit1604/jenkins-docs/edit/main/docs/projects/modules/gsoc/pages/2020/project-ideas/git-plugin-performance.adoc"><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"/></svg>  Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<hr>
<div class="paragraph">
<p>layout: gsocprojectidea
title: "Git plugin performance improvements"
goal: "Improve git plugin performance"
category: Plugins
year: 2020
status: published
sig: platform
mentors:
- "markewaite"
- "fcojfernandez"
- "oleg_nenashev"
- "baymac"
- "justinharringa"
skills:
- Java
- Git
- Benchmarking
- JMH
links:
  gitter: "jenkinsci_git-plugin:gitter.im"
  draft: <a href="https://docs.google.com/document/d/1bmpgW_8cg38ulp0uFdn2BRfVlIrZ03FFhWpe0MVHyyI" class="bare">https://docs.google.com/document/d/1bmpgW_8cg38ulp0uFdn2BRfVlIrZ03FFhWpe0MVHyyI</a>
---</p>
</div>
<div class="paragraph">
<p>Improve Jenkins git plugin performance by fixing known issues in performance critical areas.
Implement performance comparisons between the command line git and JGit implementations using the Java Microbenchmark Harness.
Improve the performance of git operations that use the command line git implementation by selectively replacing CLI implementations with JGit when benchmarks show a significant performance gain.</p>
</div>
<div class="sect2">
<h3 id="_fix_known_issues_avoid_redundant_fetch"><a class="anchor" href="#_fix_known_issues_avoid_redundant_fetch"></a>Fix Known Issues - Avoid Redundant Fetch</h3>
<div class="paragraph">
<p>The Jenkins git plugin copies remote git repositories into Jenkins workspaces on agents as part of a 'checkout'.
The checkout creates an empty git repository in the workspace, configures it with 'git config', and populates it with 'git fetch'.
Unfortunately, the most commonly used path through the code will call 'git fetch' twice.</p>
</div>
<div class="paragraph">
<p>The second call to 'git fetch' is useless when it is using the same arguments as the first call.
It wastes server time, network bandwidth, and job time.
With large repositories, that waste of time may be a minute or more.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Implement at least one automated test to detect the redundant fetch</p>
</li>
<li>
<p>Implement changes in the git plugin and the git client plugin to avoid the second call to 'git fetch' when using the same arguments as the first call to 'git fetch'.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_performance_comparisons"><a class="anchor" href="#_performance_comparisons"></a>Performance Comparisons</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Compare <a href="https://github.com/jenkinsci/git-client-plugin/blob/master/src/main/java/org/jenkinsci/plugins/gitclient/CliGitAPIImpl.java">CliGitAPIImpl</a> and <a href="https://github.com/jenkinsci/git-client-plugin/blob/master/src/main/java/org/jenkinsci/plugins/gitclient/JGitAPIImpl.java">JGitAPIImpl</a> using the <a href="/blog/2019/06/21/performance-testing-jenkins/">Java Microbenchmark Harness</a> by writing benchmark tests that compare performance of the same operations using the two different implementations.</p>
</li>
<li>
<p>Present the results of those comparisons.</p>
</li>
<li>
<p>Use the results of the comparisons and common use cases to prioritize operations for performance improvement.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_performance_improvements"><a class="anchor" href="#_performance_improvements"></a>Performance Improvements</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Confirm that existing automated tests adequately verify the existing implementations.
If they do not adequately verify implementation behaviors, write additional automated tests to verify the existing implementations.</p>
</li>
<li>
<p>Replace a command line git implementation with a JGit implementation in cases where benchmarks show JGit is faster.</p>
</li>
<li>
<p>Confirm that benchmark tests show the performance improvement.</p>
</li>
<li>
<p>Confirm that automated tests confirm no loss of functionality.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_quickstart"><a class="anchor" href="#_quickstart"></a>Quickstart</h3>
<div class="paragraph">
<p>The project idea is expected to require changes in both the git client plugin and the git plugin.</p>
</div>
<div class="paragraph">
<p>Install a git client plugin development environment by following the <a href="https://github.com/jenkinsci/git-client-plugin/blob/master/CONTRIBUTING.adoc">contributing instructions</a>.
Compile the plugin, run its automated tests, and confirm that the automated tests are passing.
Enable coverage reporting and review the coverage report.</p>
</div>
<div class="paragraph">
<p>Install a git plugin development environment by following the <a href="https://github.com/jenkinsci/git-plugin/blob/master/CONTRIBUTING.adoc">contributing instructions</a>.
Compile the plugin, run its automated tests, and confirm that the automated tests are passing.
Enable coverage reporting and review the coverage report.</p>
</div>
<div class="paragraph">
<p>Install an integrated development environment (Netbeans, Eclipse, IntelliJ, &#8230;&#8203;).
Run the git plugin in the development environment.
Set a breakpoint and confirm that the breakpoint is reached in the development environment.</p>
</div>
<div class="paragraph">
<p>Alternately, use the coverage report to identify an interesting area that has insufficient test coverage.
Submit one or more tests to improve coverage.
For example, more tests could be created for <a href="https://github.com/jenkinsci/git-plugin/blob/master/src/main/java/jenkins/plugins/git/MergeWithGitSCMExtension.java">MergeWithGitSCMExtension</a>
or more tests could be added to <a href="https://github.com/jenkinsci/git-plugin/blob/master/src/main/java/hudson/plugins/git/extensions/impl/PreBuildMerge.java">PreBuildMerge</a>
or added to <a href="http://mark-pc2.markwaite.net:8080/job/Git-Folder/job/git-plugin/lastBuild/jacoco/hudson.plugins.git.extensions.impl/UserIdentity/">UserIdentity</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_newbie_friendly_issues"><a class="anchor" href="#_newbie_friendly_issues"></a>Newbie-friendly issues</h3>
<div class="paragraph">
<p>Consider implementing a fix for one or more of the <a href="https://issues.jenkins.io/issues/?jql=(component%3Dgit-plugin%20OR%20component%20%3D%20git-client-plugin)%20and%20labels%20%3D%20newbie-friendly%20and%20status%20in%20(Open%2CReopened)">newbie friendly issues</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_links"><a class="anchor" href="#_links"></a>Links</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://groups.google.com/d/msg/jenkinsci-gsoc-all-public/bJUtxIxcT64/0Ddt_LZvCQAJ">Jenkins GSoC mailing list discussion of redundant fetch removal idea</a></p>
</li>
<li>
<p><a href="https://groups.google.com/d/msg/jenkinsci-gsoc-all-public/SXeSeo3yRl4/I8QeJYVvCQAJ">Jenkins GSoC mailing list discussion of JMH benchmark idea</a></p>
</li>
<li>
<p><a href="https://issues.jenkins.io/browse/JENKINS-49757">JENKINS-49757</a> - Git plugin calls fetch twice per checkout</p>
</li>
<li>
<p><a href="https://issues.jenkins.io/browse/JENKINS-56404">JENKINS-56404</a> - Exclude redundant fetch</p>
</li>
</ul>
</div>
</div>
</article>
  </div>
</main>
</div>
<jio-footer></jio-footer>
<script id="site-script" src="../../../../../_/js/site.js" data-ui-root-path="../../../../../_"></script>
<script async src="../../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
